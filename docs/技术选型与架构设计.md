# 《星穹铁道剧情复现计划》技术选型与架构设计

本文档与《概要设计》分层对应，用于记录技术选型与架构设计结论。**多轮对话逐步补充**：未确定项标「待定」，待下一轮讨论后更新。

---

## 一、选型总览

### 1.1 部署形态

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 运行形态 | 本地单机 / 本地+服务端 / 纯服务端 | **待定** |
| 多用户 | 是否需要多用户同时使用、数据隔离方式 | **待定** |

### 1.2 技术栈一览（与概要设计分层对应）

| 层次 | 概要设计对应 | 技术选型 | 备注 |
|------|----------------|----------|------|
| 表现层 | Presentation | **待定**（CLI / Web 框架等） | 见 §2.1 |
| 应用层 | Application | **待定**（语言、框架） | 见 §2.2 |
| 领域层 | Domain | **待定**（语言、模块边界） | 见 §2.2 |
| 基础设施层 | Infrastructure | **待定**（存储、配置、LLM 等） | 见 §2.3 |

### 1.3 是否使用 LLM 及形态

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 对话/行动生成 | 是否使用大模型（API 调用）还是规则/模板先行 | **待定** |
| 若用 LLM | 自建部署还是第三方 API；模型选型 | **待定** |

---

## 二、各层技术选型

### 2.1 表现层

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 形态 | CLI / Web（若 Web：框架如 React/Vue、是否 SSR） | **待定** |
| 移动端 | 是否需要移动端支持 | **待定** |

### 2.2 应用层与领域层

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 语言与运行时 | 如 Python / Node / Go 等 | **待定** |
| 应用层与领域层边界 | 是否显式区分包结构/模块边界 | **待定** |

### 2.3 基础设施层

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 状态存储 | 内存+文件 / 关系型 / 文档型 / 混合 | **待定** |
| 锚点存储 | 与状态存储统一或独立 | **待定** |
| 配置与导出包 | JSON/YAML 读写方式；是否引入 Schema 校验 | **待定** |

---

## 三、数据与存储

### 3.1 状态存储

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 存储介质 | 见 §2.3 | **待定** |
| 状态数据结构 | 与《概要设计》§4.1 核心实体的对应方式 | **待定** |

### 3.2 锚点存储

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 存储介质与格式 | 与《概要设计》§3.4 锚点标注规范的对应 | **待定** |

### 3.3 配置与导出包

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 配置格式 | JSON / YAML；是否使用 JSON Schema 等校验 | **待定** |
| 导出包格式 | 文件格式、元数据、依赖 ID 列表约定 | **待定** |

---

## 四、接口与集成

### 4.1 内部模块间接口

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 调用方式 | 函数调用 / 事件 / 服务 API | **待定** |

### 4.2 对外 API（若需要）

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 形态 | 是否提供 REST / GraphQL 等 | **待定** |

### 4.3 与 LLM/外部服务的集成

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 集成方式 | 若用 LLM：API 调用方式、鉴权、降级策略 | **待定** |

---

## 五、非功能

### 5.1 性能策略

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 响应时间目标 | 单角色 ≤2s、多角色 ≤5s 对应的技术手段 | **待定** |
| 缓存/异步/队列 | 是否引入及使用场景 | **待定** |

### 5.2 安全与多用户

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 多用户隔离 | 认证与数据隔离方式 | **待定** |
| 导出/导入安全 | 包的安全校验、敏感信息限制 | **待定** |

### 5.3 可扩展性预留

| 项 | 说明 | 当前结论 |
|----|------|----------|
| 水平扩展 | 是否在范围内；若需要，架构预留 | **待定** |

---

## 六、未决项与多轮待定

以下项待后续对话确定，确定后从本列表移除并更新对应章节。

- [ ] **第一轮**：部署形态、是否用 LLM、存储形态（§1.1、§1.3、§2.3、§3）
- [ ] **第二轮**：表现层技术、应用/领域层语言与边界、导出包与配置物理格式（§2.1、§2.2、§3.3）
- [ ] **第三轮**：内部接口风格、对外 API、安全与多用户、性能与扩展（§4、§5）

技术选型稳定后，可在《WBS 任务分解表》中为关键任务补充「实现方式/技术引用」。
